<!doctype html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="csrf-token" content="{{ csrf_token() }}">
    <title>{% block title %}ğŸ´ æ¨ã—ãƒ¡ã‚·{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script>
        // CSRF ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«åˆ©ç”¨å¯èƒ½ã«ã™ã‚‹
        window.csrf_token = "{{ csrf_token() }}";
    </script>
</head>
<body>
    <nav>
        <a href="{{ url_for('index') }}">ğŸ  ãƒ›ãƒ¼ãƒ </a>
        <a href="{{ url_for('post') }}">ğŸ“ æŠ•ç¨¿</a>
        <a href="{{ url_for('search') }}">ğŸ” æ¤œç´¢</a>
        <a href="{{ url_for('ranking') }}"><span>ğŸ†</span> ãƒ©ãƒ³ã‚­ãƒ³ã‚°</a>
        <a href="{{ url_for('advertisements') }}">ğŸ“¢ åºƒå‘Š</a>
        <a href="{{ url_for('account') }}">ğŸ‘¤ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ ({{ session.username if session.username else 'ã‚²ã‚¹ãƒˆ' }})</a>
        {% if session.is_admin %}
            <span style="color: #ffc107; font-weight: bold;">ã€ğŸ”§ ç®¡ç†è€…ã€‘</span>
        {% endif %}
        <button type="button" id="officialInfoBtn" class="official-info-btn">ğŸ“± å…¬å¼æƒ…å ±</button>
    </nav>

    <div class="content">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <ul class="flashes">
                    {% for category, message in messages %}
                        <li class="{{ category }}">{{ message }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
        {% endwith %}

        {% block content %}{% endblock %}
    </div>

    <div id="postDetailModal" class="modal" style="display: none;">
        <div class="modal-content post-detail-modal">
            <span class="close" id="closePostModal">&times;</span>
            
            <div class="modal-body">
                <div class="modal-image-container">
                    <img class="modal-image" alt="æŠ•ç¨¿ç”»åƒ">
                </div>
                
                <div class="modal-info">
                    <h2 class="modal-store-name"></h2>
                    
                    <div class="modal-meta">
                        <div class="modal-meta-item">
                            <span class="modal-meta-label">ğŸ“ åœ°åŸŸ:</span>
                            <span class="modal-area"></span>
                        </div>
                        <div class="modal-meta-item">
                            <span class="modal-meta-label">ğŸ’° ä¾¡æ ¼å¸¯:</span>
                            <span class="modal-price"></span>
                        </div>
                        <div class="modal-meta-item">
                            <span class="modal-meta-label">ğŸ‘¤ æŠ•ç¨¿è€…:</span>
                            <span class="modal-user"></span>
                        </div>
                        <div class="modal-meta-item" style="display: none;">
                            <span class="modal-meta-label">ğŸ« é«˜æ ¡:</span>
                            <span class="modal-school"></span>
                        </div>
                    </div>
                    
                    <div class="modal-caption-container">
                        <h3>ç´¹ä»‹æ–‡</h3>
                        <p class="modal-caption"></p>
                    </div>
                    
                    <div class="modal-actions">
                        <button type="button" class="like-button modal-like-button" data-post-id="">
                            <span class="heart-icon">ğŸ¤</span>
                            <span class="like-count">0</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- å…¬å¼æƒ…å ±ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="officialInfoModal" class="official-info-modal">
        <div class="official-info-content">
            <div class="official-info-header">
                <h3>ğŸ“± æ¨ã—ãƒ¡ã‚· å…¬å¼æƒ…å ±</h3>
                <button type="button" id="closeOfficialModal" class="official-info-close">&times;</button>
            </div>
        
            <div class="official-info-body">
                <div class="instagram-section">
                    <h4>ğŸŒŸ å…¬å¼Instagram</h4>
                    <p>å…¬å¼ã‚¤ãƒ³ã‚¹ã‚¿ã‚°ãƒ©ãƒ ã«ãŠå¾—ãªæƒ…å ±ãŒè¼‰ã£ã¦ã„ã‚‹ã‹ã‚‚ï¼ï¼Ÿ<br>ãœã²è¦‹ã«æ¥ã¦ãã ã•ã„ï¼</p>
                    <div class="instagram-handle">@oshimeshi_yamanashi</div>
                    <button type="button" class="instagram-btn" href="#">ğŸ“± Instagramã‚’é–‹ã</button>
                </div>
            
                <div class="bug-report-section">
                    <h4>ğŸ› ãƒã‚°å ±å‘Šãƒ»ãŠå•ã„åˆã‚ã›</h4>
                    <p>ä½•ã‹ä¸å…·åˆã‚„æ°—ã«ãªã‚‹ã“ã¨ãŒã‚ã‚Œã°<br>Instagram DMã«ã¦ãŠæ°—è»½ã«ã©ã†ãï¼</p>
                </div>
            
                <div class="about-section">
                    <h4>ğŸ‘¨â€ğŸ’» é‹å–¶ã«ã¤ã„ã¦</h4>
                    <p>
                        å±±æ¢¨çœŒé«˜æ ¡ç”Ÿå‘ã‘ã®ã‚°ãƒ«ãƒ¡æƒ…å ±ã‚¢ãƒ—ãƒªã§ã™ï¼<br>
                        ç ”ç©¶ç›®çš„ã§é‹å–¶ã—ã¦ã„ã‚‹ãŸã‚ã€<br>
                        æ•°ãƒ¶æœˆå¾Œã«ã‚µãƒ¼ãƒ“ã‚¹çµ‚äº†ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚<br><br>
                        ã”è³ªå•ãƒ»ã”è¦æœ›ãŒã‚ã‚Œã°DMã«ã¦ãŠå•ã„åˆã‚ã›ãã ã•ã„ï¼
                    </p>
                </div>
            </div>
        </div>
    </div>
    <script src="{{ url_for('static', filename='main.js') }}"></script>
</body>
</html>